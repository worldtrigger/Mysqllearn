# 数据库设计

## 数据库设计三范式

### 什么是设计范式

设计表的依据 按照这个三范设计的表不会出现数据冗余

### 三范式有哪些

- 第一范式: 任何一张表应该都有主键,并且每一个字段原子性不可再分

- 第二范式: 所有非主键字段完全依赖主键，不能产生部份依赖

`多对多? 三张表 关系表两个外键`

学生表

| id  | studentName |
| --- | ----------- |
| 1   | 张三        |
| 2   | 李四        |

教师表

| id  | teacherName |
| --- | ----------- |
| 1   | 王老师      |
| 2   | 赵老师      |

关系表

student_teacher_relation

| id  | studentNo(fk) | teacherNo(fk) |
| --- | ------------- | ------------- |
| 1   | 1             | 1             |
| 2   | 1             | 2             |
| 3   | 2             | 1             |
| 3   | 2             | 2             |

这样多对多关系描述完毕

- 第三范式:建立在第二范式的基础之上，所以非主键字段直接依赖主键,不能产生传递依赖

`一对多 两张表 多的表加外键`

班级表

| cno | canme  |
| --- | ------ |
| 1   | 班级 1 |
| 2   | 班级 2 |

学生表

| sno | sname | classno(fk) |
| --- | ----- | ----------- |
| 101 | 张 1  | 1           |
| 102 | 张 2  | 1           |
| 103 | 张 3  | 2           |
| 104 | 张 4  | 2           |
| 105 | 张 5  | 1           |

- 一对一怎么设计

比如 登陆信息表(用户名,密码) 用户详细信息表(比如手机号，家庭住址，性别之类的)

登录信息表

| id  | username | password |
| --- | -------- | -------- |
| 1   | zs       | 123      |
| 2   | ls       | 156      |

用户信息表

| id(pk+fk) | realname | tel        |
| --------- | -------- | ---------- |
| 1         | 张三     | 1111111111 |
| 2         | 李四     | 2222222222 |

两种方案

`方案1` 主键共享

登录信息表里面的主键就是用户信息表的外键 不能胡乱填写

`方案2` 外键唯一

加一列对应的 userid

| id(pk+fk) | realname | tel        | userid(fk+unique) |
| --------- | -------- | ---------- | ----------------- |
| 1         | 张三     | 1111111111 | 1                 |
| 2         | 李四     | 2222222222 | 2                 |

### 总结

提醒: 在实际开发中 以满足客户的需求为主，有的时候拿冗余换执行速度
